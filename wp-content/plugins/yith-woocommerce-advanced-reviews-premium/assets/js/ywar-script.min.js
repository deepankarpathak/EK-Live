jQuery(document).ready(function(e){function a(){e("#unvalidated_rating").prop("name","rating"),e("#unvalidated_rating").prop("id","rating"),e("p.comment-form-rating").show(),e("p.upload_section").show(),e("#cancel-comment-reply-link").is(":visible")&&e("#cancel-comment-reply-link").click()}function t(a){e(a).block({message:null,overlayCSS:{background:"#fff url("+ywar.loader+") no-repeat center",opacity:.6}})}function o(a){var t=e(a).attr("data-id_product"),o=e(a).attr("data-order"),r=e(a).attr("data-stars"),i=e(a).attr("data-page"),n=e(a).attr("data-dialog"),s={action:"get_ajax_comments",product_id:t,stars:r,order:o,data_page:i,is_modal:n,_wpnonce:ywar.nonce_value,return_path:window.location.href};return s}e("a.comment-reply-link").addClass("button");var r='<div id="modal_reviews" class="pp_pic_holder">     <a class="pp_close" href="#"></a> 						<div class="pp_content_container"> 							<div class="pp_left"> 							<div class="pp_right"> 								<div class="pp_content"> 									<div class="pp_loaderIcon"></div> 									<div class="pp_fade"> 										<a href="#" class="pp_expand" title="Expand the image">Expand</a> 										<div id="pp_full_res"></div> 										<div class="pp_details"> 											<div class="pp_nav"> 												<a href="#" class="pp_arrow_previous">Previous</a> 												<p class="currentTextHolder">0/0</p> 												<a href="#" class="pp_arrow_next">Next</a> 											</div> 											<p class="pp_description"></p> 										</div> 									</div> 								</div> 							</div> 							</div> 						</div> 						</div>					<div class="pp_overlay"></div>';e(document).on("click","a.ywar_votereview",function(a){if(a.preventDefault(),!e(this).hasClass("ywar_votereview_selected")){var t=e(this).attr("data-id_review"),o=e(this).attr("data-vote_review"),r={action:"vote_review",id_review:t,review_value:o,_wpnonce:ywar.nonce_value,return_path:window.location.href},i="#vote_yes_"+t,n="#vote_no_"+t,s=e(this).parent();s.block({message:null,overlayCSS:{background:"#fff url("+ywar.loader+") no-repeat center",opacity:.6}}),e.post(woocommerce_params.ajax_url,r,function(a){-1==a.code?top.location.replace(a.value):1==a.code&&(1==o?(e(i).addClass("vote_selected"),e(n).removeClass("vote_selected")):(e(n).addClass("vote_selected"),e(i).removeClass("vote_selected")),s.children(".ywar_review_helpful").empty().append(a.value)),s.unblock()})}}),e(document).on("click","a.review-inappropriate",function(a){a.preventDefault();var t=e(this).attr("data-id_review"),o={action:"report_inappropriate_review",id_review:t,_wpnonce:ywar.nonce_value,return_path:window.location.href},r=e(this).parent();r.block({message:null,overlayCSS:{background:"#fff url("+ywar.loader+") no-repeat center",opacity:.6}}),e.post(woocommerce_params.ajax_url,o,function(e){r.empty().append('<span class="inappropriate-content reported">'+e.value+"</span"),r.unblock()})}),e("#reviews #comments>h2").remove(),e('a[href="#reviews"]').attr("href","#reviews_summary"),e("#tab-reviews").on("click","a.ywar_filter_reviews",function(i){i.preventDefault(),a();var n=e(this).attr("data-dialog");1!=n&&t("#reviews_summary"),e.post(woocommerce_params.ajax_url,o(e(this)),function(a){1!=n?(e("#reviews_header").empty().append(a.review_title),e("#comments ol.commentlist").empty().append(a.comment_list),e("div.ywar_show_more").empty().append(a.load_more),e("#reviews_summary").unblock()):(e("#reviews_dialog").empty().append('<ol class="commentlist">'+a.comment_list+"</ol>"),e("#reviews_dialog").append('<div class="ywar_show_more">'+a.load_more+"</div>"),e().prettyPhoto({markup:r,default_width:"70%",default_height:"200px",social_tools:!1,theme:"pp_woocommerce",modal:!0,callback:function(){e("#reviews_dialog").empty()}}),e.prettyPhoto.open("#reviews_dialog","",""),e("div.pp_pic_holder.pp_woocommerce").appendTo("#comments")),e("a.comment-reply-link").addClass("button")},"json")}),e(document).on("click","a.ywar_show_more, button.ywar_show_more_container",function(r){r.preventDefault(),a();var i=e(this);i.is("button")&&(i=i.children("a.ywar_show_more"));var n=i.attr("data-dialog");1!=n&&t(i),e.post(woocommerce_params.ajax_url,o(i),function(a){1!=n?(e("#reviews_header").empty().append(a.review_title),e("#reviews ol.commentlist").append(a.comment_list),e(i).unblock()):e("#modal_reviews ol.commentlist").append(a.comment_list),e("div.ywar_show_more").empty().append(a.load_more),e("a.comment-reply-link").addClass("button")},"json")}),e("#tab-reviews").on("click","a.ywar_filter_order",function(r){r.preventDefault(),a(),t("#reviews_order");var i=e(this);e.post(woocommerce_params.ajax_url,o(e(this)),function(a){e("#reviews_header").empty().append(a.review_title),e("ol.commentlist").empty().append(a.comment_list),e("div.ywar_show_more").empty().append(a.load_more),"most_recent_reviews"==i.attr("id")?(e("#most_recent_reviews").addClass("active"),e("#most_helpful_reviews").removeClass("active")):"most_helpful_reviews"==i.attr("id")&&(e("#most_helpful_reviews").addClass("active"),e("#most_recent_reviews").removeClass("active")),e("a.comment-reply-link").addClass("button"),e("#reviews_order").unblock()},"json")}),e("#tab-reviews").on("click","a.comment-reply-link",function(){e('select#rating option[value="5"]').prop("selected",!0),e("p.comment-form-rating").hide(),e("p.upload_section").hide()}),e(document).on("click","#cancel-comment-reply-link",function(){e("p.comment-form-rating").show(),e("p.upload_section").show()})});