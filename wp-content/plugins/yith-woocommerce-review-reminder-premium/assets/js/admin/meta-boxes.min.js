jQuery(function(e){e("body").on("click","button.do-send-email",function(){if(window.confirm(ywrr_meta_boxes.do_send_email)){var r={};e("#order_line_items tr").each(function(){e(this).find("input[type=checkbox]").attr("checked")&&(r[e(this).data("order_item_id")]=e(this).data("order_item_id"))});var t={action:"ywrr_send_request_mail",order_id:ywrr_meta_boxes.post_id,order_date:ywrr_meta_boxes.order_date,items_to_review:JSON.stringify(r,null,"")};e.post(ywrr_meta_boxes.ajax_url,t,function(e){window.alert(e===!0?ywrr_meta_boxes.after_send_email:e.error)})}}).on("click","button.do-reschedule-email",function(){if(window.confirm(ywrr_meta_boxes.do_reschedule_email)){var r={};e("#order_line_items tr").each(function(){e(this).find("input[type=checkbox]").attr("checked")&&(r[e(this).data("order_item_id")]=e(this).data("order_item_id"))});var t={action:"ywrr_reschedule_mail",order_id:ywrr_meta_boxes.post_id,items_to_review:JSON.stringify(r,null,"")};e.post(ywrr_meta_boxes.ajax_url,t,function(e){window.alert(e===!0?ywrr_meta_boxes.after_reschedule_email:"notfound"===e?ywrr_meta_boxes.not_found_reschedule:e.error)})}}).on("click","button.do-cancel-email",function(){if(window.confirm(ywrr_meta_boxes.do_cancel_email)){var r={action:"ywrr_cancel_mail",order_id:ywrr_meta_boxes.post_id};e.post(ywrr_meta_boxes.ajax_url,r,function(e){window.alert(e===!0?ywrr_meta_boxes.after_cancel_email:"notfound"===e?ywrr_meta_boxes.not_found_cancel:e.error)})}}).on("click","button.do-send-test-email",function(){var r=e("#ywrr_mail_template").val()||"base",t=e("#test_email").val(),a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(a.test(t)){var i={action:"ywrr_send_test_mail",email:t,template:r};e.post(ywrr_meta_boxes.ajax_url,i,function(e){window.alert(e===!0?ywrr_meta_boxes.after_send_test_email:e.error)})}else window.alert(ywrr_meta_boxes.test_mail_wrong)}),e(document).ready(function(e){e("select#ywrr_request_type").change(function(){var r=e("option:selected",this).val(),t=e("#ywrr_request_number").parent().parent(),a=e("#ywrr_request_criteria").parent().parent();switch(r){case"selection":t.show(),a.show();break;default:t.hide(),a.hide()}}).change(),e("select#ywrr_mail_item_link").change(function(){var r=e("option:selected",this).val(),t=e("#ywrr_mail_item_link_hash").parent().parent();switch(r){case"custom":t.show();break;default:t.hide()}}).change(),e("#ywrr_mail_template_enable").change(function(){e(this).is(":checked")?e("#ywrr_mail_template").val("base").prop("disabled",!0):e("#ywrr_mail_template").prop("disabled",!1)}).change()})});